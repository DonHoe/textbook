# opencv

### 图片组成
图像由像素组成，每个像素为一个颜色点，许多的点汇聚成一个图像面。  
在计算机中以数组矩阵的形式处理图片，灰度/二值图片以二维数组存储（[行,列]），彩色图片为三维数组（[行,列,通道]），通道有三个，依次为b(蓝),g(绿),r(红)，每一个值为[0,225]之间的数字。

### 常用命令
```python
import cv2
import numpy as np

#下面都以这张图片作为案例
#读取图片
img = cv2.imread("dog.jpeg")

#二值/灰度为(行数,列数)，彩色为(行数,列数,通道数)
img.shape
#像素数目
img.size
#数据类型
img.dtype

#拆分bgr通道
b, g, r = cv2.split(dog)
#合并通道
cv2.merge([r, g, b])
```

### 图像运算
#### 图像加法运算
```python
#对于8位二进制的像素点，直接相加会导致mod 256，
#使用add函数，是的值最大到255，实现提升饱和度的作用
img1 = cv2.add(img,img)
#加权相加
img3 = cv2.addWeighted(src1, 1, src2, 3, 3)
```
#### 按位运算
```python
# 数据按二进制每一位进行计算
# 按位与
cv2.bitwise_and()
# 按位或
cv2.bitwise_or()
# 按位取反
cv2.bitwise_not()
# 按位异或 可用于加密解密
cv2.bitwise_xor()
```
#### 图片分层
每个像素点有n(通道数)个8位二进制数字组成。  
对于每个数字均可提取出每个二进制位，填入像素矩阵，实现分层。  
用处：隐式水印（利用最后一位的分层矩阵，实现二值水印图像）
### 色彩转换
灰度公式:`Gray=0.299*R+0.587*G+0.114*B`